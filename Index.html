          const addToHistory = (type, crypto, amount, price, profit = null) => {
            const trade = {
              id: Date.now(),
              timestamp: new Date().toISOString(),
              type,
              crypto,
              amount,
              price,
              total: amount * price,
              profit
            };
            setTradeHistory([trade, ...tradeHistory].slice(0, 50)); // Keep last 50 trades
          };

          const sendEmailAlert = async (suggestion) => {
            if (!emailAlerts || !userEmail) return;
            
            // This is a simulated email alert
            // In production, you'd call a backend API to send real emails
            console.log(`ðŸ“§ Email Alert to ${userEmail}:`, {
              subject: `ðŸ¤– AI Trading Signal: ${suggestion.action} ${suggestion.symbol}`,
              body: `
                AI Recommendation: ${suggestion.action} ${suggestion.symbol}
                Price: ${suggestion.price.toFixed(2)}
                Confidence: ${suggestion.confidence}
                Reason: ${suggestion.reason}
                
                This is an automated alert from your Crypto Trading Simulator.
              `
            });
            
            // Show notification to user
            setMessage(`ðŸ“§ Email alert sent for ${suggestion.action} ${suggestion.symbol}`);
          };<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Crypto Trading Simulator</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        const App = () => {
          const [portfolio, setPortfolio] = useState([]);
          const [balance, setBalance] = useState(10000);
          const [prices, setPrices] = useState({});
          const [loading, setLoading] = useState(true);
          const [message, setMessage] = useState('');
          const [historicalData, setHistoricalData] = useState({});
          const [aiSuggestions, setAiSuggestions] = useState([]);
          const [economicData, setEconomicData] = useState(null);
          const [sentiment, setSentiment] = useState('neutral');
          const [selectedCrypto, setSelectedCrypto] = useState('bitcoin');
          const [tradeAmount, setTradeAmount] = useState('');
          const [tradeHistory, setTradeHistory] = useState([]);
          const [userEmail, setUserEmail] = useState('');
          const [emailAlerts, setEmailAlerts] = useState(false);
          const [showHistory, setShowHistory] = useState(false);
          const [fearGreedIndex, setFearGreedIndex] = useState(null);
          const [vixIndex, setVixIndex] = useState(null);
          const [dollarIndex, setDollarIndex] = useState(null);

          const cryptos = [
            { id: 'bitcoin', symbol: 'BTC', name: 'Bitcoin' },
            { id: 'ethereum', symbol: 'ETH', name: 'Ethereum' },
            { id: 'solana', symbol: 'SOL', name: 'Solana' },
            { id: 'cardano', symbol: 'ADA', name: 'Cardano' },
            { id: 'ripple', symbol: 'XRP', name: 'XRP' }
          ];

          useEffect(() => {
            const saved = localStorage.getItem('cryptoPortfolio');
            const savedBal = localStorage.getItem('cryptoBalance');
            const savedHistory = localStorage.getItem('tradeHistory');
            const savedEmail = localStorage.getItem('userEmail');
            const savedAlerts = localStorage.getItem('emailAlerts');
            
            if (saved) setPortfolio(JSON.parse(saved));
            if (savedBal) setBalance(parseFloat(savedBal));
            if (savedHistory) setTradeHistory(JSON.parse(savedHistory));
            if (savedEmail) setUserEmail(savedEmail);
            if (savedAlerts) setEmailAlerts(savedAlerts === 'true');
            
            fetchPrices();
            fetchHistorical();
            fetchEconomic();
            fetchFearGreed();
          }, []);

          useEffect(() => {
            if (Object.keys(historicalData).length > 0) {
              fetchVIX();
              fetchDollarIndex();
            }
          }, [historicalData]);

          useEffect(() => {
            if (economicData && Object.keys(historicalData).length > 0) {
              analyzeSentiment(
                economicData.inflation,
                economicData.fedRate,
                economicData.gdpGrowth,
                economicData.unemployment
              );
            }
          }, [economicData, fearGreedIndex, vixIndex, dollarIndex]);

          useEffect(() => {
            localStorage.setItem('tradeHistory', JSON.stringify(tradeHistory));
          }, [tradeHistory]);

          useEffect(() => {
            localStorage.setItem('userEmail', userEmail);
          }, [userEmail]);

          useEffect(() => {
            localStorage.setItem('emailAlerts', emailAlerts.toString());
          }, [emailAlerts]);

          useEffect(() => {
            if (Object.keys(prices).length > 0 && Object.keys(historicalData).length > 0) {
              generateAI();
            }
          }, [prices, historicalData, portfolio]);

          useEffect(() => {
            localStorage.setItem('cryptoPortfolio', JSON.stringify(portfolio));
          }, [portfolio]);

          useEffect(() => {
            localStorage.setItem('cryptoBalance', balance.toString());
          }, [balance]);

          const fetchPrices = async () => {
            try {
              const ids = cryptos.map(c => c.id).join(',');
              const res = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd&include_24h_change=true`);
              const data = await res.json();
              const p = {};
              cryptos.forEach(c => {
                if (data[c.id]) {
                  p[c.symbol] = { 
                    price: data[c.id].usd, 
                    change: data[c.id].usd_24h_change || 0 
                  };
                }
              });
              setPrices(p);
              setLoading(false);
            } catch (e) {
              setMessage('Error loading prices');
              setLoading(false);
            }
          };

          const fetchHistorical = async () => {
            try {
              const promises = cryptos.map(async c => {
                const res = await fetch(`https://api.coingecko.com/api/v3/coins/${c.id}/market_chart?vs_currency=usd&days=7&interval=daily`);
                const data = await res.json();
                return { symbol: c.symbol, data: data.prices };
              });
              const results = await Promise.all(promises);
              const h = {};
              results.forEach(r => { h[r.symbol] = r.data; });
              setHistoricalData(h);
            } catch (e) {
              console.error('Historical data error:', e);
            }
          };

          const fetchEconomic = async () => {
            try {
              const key = 'O4XA8PH7S02INUTS';
              
              // Fetch US data
              const inf = await fetch(`https://www.alphavantage.co/query?function=INFLATION&apikey=${key}`);
              const fed = await fetch(`https://www.alphavantage.co/query?function=FEDERAL_FUNDS_RATE&apikey=${key}`);
              const gdp = await fetch(`https://www.alphavantage.co/query?function=REAL_GDP&apikey=${key}`);
              const unemployment = await fetch(`https://www.alphavantage.co/query?function=UNEMPLOYMENT&apikey=${key}`);
              
              const infData = await inf.json();
              const fedData = await fed.json();
              const gdpData = await gdp.json();
              const unempData = await unemployment.json();
              
              if (infData.data && fedData.data) {
                const inflation = parseFloat(infData.data[0].value);
                const fedRate = parseFloat(fedData.data[0].value);
                const gdpGrowth = gdpData.data ? parseFloat(gdpData.data[0].value) : 2.5;
                const unemp = unempData.data ? parseFloat(unempData.data[0].value) : 4.0;
                
                setEconomicData({ 
                  inflation, 
                  fedRate, 
                  gdpGrowth,
                  unemployment: unemp
                });
                
                // Enhanced sentiment analysis with all indicators
                analyzeSentiment(inflation, fedRate, gdpGrowth, unemp);
              }
            } catch (e) {
              console.error('Economic data error:', e);
              setEconomicData({ inflation: 3.2, fedRate: 4.5, gdpGrowth: 2.5, unemployment: 4.0 });
              analyzeSentiment(3.2, 4.5, 2.5, 4.0);
            }
          };

          const fetchFearGreed = async () => {
            try {
              const res = await fetch('https://api.alternative.me/fng/?limit=1');
              const data = await res.json();
              if (data.data && data.data[0]) {
                const fgValue = parseInt(data.data[0].value);
                const fgClassification = data.data[0].value_classification;
                setFearGreedIndex({ value: fgValue, label: fgClassification });
              }
            } catch (e) {
              console.error('Fear & Greed error:', e);
              setFearGreedIndex({ value: 50, label: 'Neutral' });
            }
          };

          const fetchVIX = async () => {
            try {
              // VIX from Alpha Vantage is not directly available, so we'll use a proxy
              // In real implementation, you'd use a market data API that provides VIX
              // For demo, we'll simulate based on crypto volatility
              const btcHist = historicalData['BTC'];
              if (btcHist && btcHist.length > 0) {
                const volatility = calcVolatility(btcHist);
                const simulatedVIX = Math.min(80, Math.max(10, volatility * 5));
                setVixIndex(simulatedVIX);
              } else {
                setVixIndex(20); // Default moderate fear
              }
            } catch (e) {
              console.error('VIX error:', e);
              setVixIndex(20);
            }
          };

          const fetchDollarIndex = async () => {
            try {
              // Dollar Index via EUR/USD inverse relationship
              const res = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=tether&vs_currencies=usd');
              // For demo, we'll simulate DXY around typical range 100-110
              // In production, use forex API
              setDollarIndex(105); // Simulated - would need forex API for real data
            } catch (e) {
              console.error('Dollar Index error:', e);
              setDollarIndex(105);
            }
          };

          const analyzeSentiment = (inflation, fedRate, gdpGrowth, unemp) => {
            let s = 'neutral';
            let score = 0;
            
            // Inflation impact
            if (inflation > 4) score -= 2;
            else if (inflation < 2) score += 1;
            
            // Fed rate impact
            if (fedRate > 5) score -= 2;
            else if (fedRate < 3) score += 2;
            
            // GDP impact
            if (gdpGrowth > 2.5) score += 2;
            else if (gdpGrowth < 1) score -= 2;
            
            // Unemployment impact
            if (unemp > 5) score -= 1;
            else if (unemp < 4) score += 1;
            
            // Fear & Greed impact
            if (fearGreedIndex) {
              if (fearGreedIndex.value > 70) score += 1; // Greed can signal top
              else if (fearGreedIndex.value < 30) score += 2; // Fear = buy opportunity
            }
            
            // VIX impact (higher VIX = more fear = bad for crypto)
            if (vixIndex) {
              if (vixIndex > 30) score -= 1;
              else if (vixIndex < 15) score += 1;
            }
            
            // Dollar Index impact (inverse to crypto)
            if (dollarIndex) {
              if (dollarIndex > 110) score -= 1;
              else if (dollarIndex < 100) score += 1;
            }
            
            // Determine sentiment
            if (score >= 3) s = 'bullish';
            else if (score >= 1) s = 'optimistic';
            else if (score <= -3) s = 'bearish';
            else if (score <= -1) s = 'cautious';
            else s = 'neutral';
            
            setSentiment(s);
          };

                        const calcRSI = (data, period = 14) => {
            if (!data || data.length < period + 1) return 50;
            const changes = [];
            for (let i = 1; i < data.length; i++) {
              changes.push(data[i][1] - data[i-1][1]);
            }
            const recent = changes.slice(-period);
            const gains = recent.filter(c => c > 0).reduce((a,b) => a+b, 0) / period;
            const losses = Math.abs(recent.filter(c => c < 0).reduce((a,b) => a+b, 0)) / period;
            if (losses === 0) return 100;
            return 100 - (100 / (1 + gains/losses));
          };

          const calcSMA = (data, period) => {
            if (!data || data.length < period) return null;
            const slice = data.slice(-period);
            return slice.reduce((a,v) => a+v[1], 0) / period;
          };

          const calcVolatility = (data) => {
            if (!data || data.length < 7) return 0;
            const returns = [];
            for (let i = 1; i < data.length; i++) {
              returns.push((data[i][1] - data[i-1][1]) / data[i-1][1]);
            }
            const variance = returns.reduce((sum, r) => sum + r * r, 0) / returns.length;
            return Math.sqrt(variance) * 100;
          };

          const generateAI = () => {
            try {
              if (Object.keys(prices).length === 0 || Object.keys(historicalData).length === 0) return;
              
              const suggestions = [];
              
              // Calculate sentiment multiplier with all indicators
              let sentimentMult = 1.0;
              if (sentiment === 'bullish') sentimentMult = 1.5;
              else if (sentiment === 'optimistic') sentimentMult = 1.2;
              else if (sentiment === 'cautious') sentimentMult = 0.8;
              else if (sentiment === 'bearish') sentimentMult = 0.5;
              
              // Fear & Greed bonus
              if (fearGreedIndex) {
                if (fearGreedIndex.value < 25) sentimentMult *= 1.2; // Extreme fear = buy opportunity
                else if (fearGreedIndex.value > 75) sentimentMult *= 0.8; // Extreme greed = caution
              }
              
              cryptos.forEach(c => {
                const p = prices[c.symbol];
                const h = historicalData[c.symbol];
                if (!p || !h) return;
                
                const rsi = calcRSI(h);
                const sma7 = calcSMA(h, 7);
                const volatility = calcVolatility(h);
                const holding = portfolio.find(x => x.symbol === c.symbol);
                
                let score = 0;
                let reasons = [];
                
                // BUY signals (only if not holding)
                if (!holding) {
                  // RSI oversold
                  if (rsi < 35) {
                    score += 2 * sentimentMult;
                    reasons.push(`Oversold RSI ${rsi.toFixed(0)}`);
                  }
                  
                  // Below moving average (buy the dip)
                  if (sma7 && p.price < sma7 * 0.98) {
                    score += 1.5 * sentimentMult;
                    reasons.push('Below 7-day MA');
                  }
                  
                  // Momentum - catching falling knives cautiously
                  if (p.change < -3 && p.change > -8) {
                    score += 1 * sentimentMult;
                    reasons.push(`Dip ${p.change.toFixed(1)}%`);
                  }
                  
                  // Volatility consideration
                  if (volatility < 3) {
                    score += 0.5;
                    reasons.push('Low volatility');
                  }
                  
                  // Macro sentiment
                  if (sentiment === 'bullish') {
                    score += 1;
                    reasons.push('Bullish macro');
                  }
                  
                  // Fear & Greed bonus
                  if (fearGreedIndex && fearGreedIndex.value < 30) {
                    score += 1;
                    reasons.push(`Fear: ${fearGreedIndex.value}`);
                  }
                  
                  if (score >= 2 && reasons.length > 0) {
                    suggestions.push({
                      id: c.id,
                      symbol: c.symbol,
                      action: 'BUY',
                      reason: reasons.join(', '),
                      price: p.price,
                      amount: 0.1,
                      confidence: score >= 4 ? 'High' : score >= 3 ? 'Medium' : 'Low',
                      score
                    });
                  }
                }
                
                // SELL signals (only if holding)
                if (holding) {
                  score = 0;
                  reasons = [];
                  
                  const pl = ((p.price - holding.buyPrice) / holding.buyPrice) * 100;
                  
                  // Take profit
                  if (pl > 10) {
                    score += 3;
                    reasons.push(`Take profit +${pl.toFixed(1)}%`);
                  } else if (pl > 5) {
                    score += 1.5;
                    reasons.push(`Good profit +${pl.toFixed(1)}%`);
                  }
                  
                  // RSI overbought
                  if (rsi > 70) {
                    score += 2;
                    reasons.push(`Overbought RSI ${rsi.toFixed(0)}`);
                  }
                  
                  // Above moving average significantly
                  if (sma7 && p.price > sma7 * 1.05) {
                    score += 1;
                    reasons.push('Extended above MA');
                  }
                  
                  // Stop loss
                  if (pl < -8) {
                    score += 2.5;
                    reasons.push(`Stop-loss ${pl.toFixed(1)}%`);
                  }
                  
                  // High volatility warning
                  if (volatility > 5) {
                    score += 0.5;
                    reasons.push('High volatility');
                  }
                  
                  if (score >= 2 && reasons.length > 0) {
                    suggestions.push({
                      id: c.id,
                      symbol: c.symbol,
                      action: 'SELL',
                      reason: reasons.join(', '),
                      price: p.price,
                      amount: holding.amount,
                      confidence: score >= 4 ? 'High' : score >= 3 ? 'Medium' : 'Low',
                      score
                    });
                  }
                }
              });
              
              // Sort by score and take top 6
              suggestions.sort((a,b) => b.score - a.score);
              setAiSuggestions(suggestions.slice(0, 6));
              
              // Send email alerts for high confidence suggestions
              if (emailAlerts && userEmail) {
                suggestions.forEach(s => {
                  if (s.confidence === 'High') {
                    sendEmailAlert(s);
                  }
                });
              }
            } catch (e) {
              console.error('AI generation error:', e);
            }
          };

          const buy = (id, amt) => {
            const c = cryptos.find(x => x.id === id);
            const p = prices[c.symbol];
            if (!p || !amt || amt <= 0) {
              alert('Invalid amount');
              return;
            }
            
            const cost = amt * p.price * 1.001; // 0.1% fee
            if (cost > balance) {
              alert(`Insufficient funds. Need ${cost.toFixed(2)}`);
              return;
            }

            setBalance(balance - cost);
            const existing = portfolio.find(x => x.symbol === c.symbol);
            if (existing) {
              const newAmt = existing.amount + amt;
              const newAvg = ((existing.amount * existing.buyPrice) + (amt * p.price)) / newAmt;
              setPortfolio(portfolio.map(x => 
                x.symbol === c.symbol 
                  ? { ...x, amount: newAmt, buyPrice: newAvg }
                  : x
              ));
            } else {
              setPortfolio([...portfolio, { 
                id: c.id, 
                symbol: c.symbol, 
                amount: amt, 
                buyPrice: p.price 
              }]);
            }
            setMessage(`âœ… Bought ${amt.toFixed(4)} ${c.symbol} for ${cost.toFixed(2)}`);
            setTradeAmount('');
          };

          const sell = (id, amt) => {
            const h = portfolio.find(x => x.id === id);
            if (!h || !amt || amt <= 0) {
              alert('Invalid amount');
              return;
            }
            
            if (amt > h.amount) {
              alert(`Only have ${h.amount.toFixed(4)} ${h.symbol}`);
              return;
            }
            
            const p = prices[h.symbol];
            if (!p) return;

            const revenue = amt * p.price * 0.999; // 0.1% fee
            const profit = revenue - (amt * h.buyPrice);
            
            setBalance(balance + revenue);
            
            if (amt === h.amount) {
              setPortfolio(portfolio.filter(x => x.id !== id));
            } else {
              setPortfolio(portfolio.map(x => 
                x.id === id 
                  ? { ...x, amount: x.amount - amt }
                  : x
              ));
            }
            
            setMessage(`âœ… Sold ${amt.toFixed(4)} ${h.symbol} for ${revenue.toFixed(2)} (${profit >= 0 ? 'Profit' : 'Loss'}: ${profit.toFixed(2)})`);
            setTradeAmount('');
          };

          const reset = () => {
            if (confirm('Reset portfolio?')) {
              setPortfolio([]);
              setBalance(10000);
              localStorage.clear();
              setMessage('Reset complete');
            }
          };

          const totalValue = portfolio.reduce((sum, h) => {
            const p = prices[h.symbol];
            return sum + (p ? h.amount * p.price : 0);
          }, 0);

          const total = balance + totalValue;

          if (loading) {
            return (
              <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center">
                <p className="text-white text-2xl">Loading...</p>
              </div>
            );
          }

          return (
            <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6">
              <div className="max-w-6xl mx-auto">
                <div className="flex justify-between items-center mb-6">
                  <h1 className="text-3xl font-bold text-white">Crypto Simulator</h1>
                  <button onClick={reset} className="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-bold">
                    Reset
                  </button>
                </div>

                {message && (
                  <div className="bg-blue-500/20 border border-blue-500 rounded-lg p-3 mb-4">
                    <p className="text-blue-300">{message}</p>
                  </div>
                )}

                {/* Trade History Modal */}
                {showHistory && (
                  <div className="bg-white/10 rounded-xl p-6 mb-4 border border-purple-500">
                    <div className="flex justify-between items-center mb-4">
                      <h2 className="text-xl font-bold text-white">ðŸ“Š Trade History</h2>
                      <button onClick={() => setShowHistory(false)} className="text-white text-2xl">Ã—</button>
                    </div>
                    
                    {tradeHistory.length === 0 ? (
                      <p className="text-purple-300">No trades yet</p>
                    ) : (
                      <div className="space-y-2 max-h-96 overflow-y-auto">
                        {tradeHistory.map(t => (
                          <div key={t.id} className="bg-slate-800/50 rounded-lg p-3 text-sm">
                            <div className="flex justify-between items-start">
                              <div>
                                <span className={`font-bold ${t.type === 'BUY' ? 'text-green-400' : 'text-red-400'}`}>
                                  {t.type}
                                </span>
                                <span className="text-white ml-2">{t.amount.toFixed(4)} {t.crypto}</span>
                                <p className="text-purple-300 text-xs mt-1">
                                  ${t.price.toFixed(2)} â€¢ Total: ${t.total.toFixed(2)}
                                </p>
                                {t.profit !== null && (
                                  <p className={`text-xs mt-1 ${t.profit >= 0 ? 'text-green-400' : 'text-red-400'}`}>
                                    {t.profit >= 0 ? 'Profit' : 'Loss'}: ${Math.abs(t.profit).toFixed(2)}
                                  </p>
                                )}
                              </div>
                              <p className="text-purple-400 text-xs">
                                {new Date(t.timestamp).toLocaleString()}
                              </p>
                            </div>
                          </div>
                        ))}
                      </div>
                    )}
                  </div>
                )}

                <div className="grid grid-cols-3 gap-4 mb-6">
                  <div className="bg-white/10 rounded-xl p-4">
                    <p className="text-purple-300 text-sm">Cash</p>
                    <p className="text-2xl font-bold text-white">${balance.toFixed(2)}</p>
                  </div>
                  <div className="bg-white/10 rounded-xl p-4">
                    <p className="text-purple-300 text-sm">Portfolio</p>
                    <p className="text-2xl font-bold text-white">${totalValue.toFixed(2)}</p>
                  </div>
                  <div className="bg-white/10 rounded-xl p-4">
                    <p className="text-purple-300 text-sm">Total</p>
                    <p className="text-2xl font-bold text-white">${total.toFixed(2)}</p>
                  </div>
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                  <div className="lg:col-span-2 space-y-6">
                    <div className="bg-white/10 rounded-xl p-6">
                      <h2 className="text-xl font-bold text-white mb-4">Trade Crypto</h2>
                      
                      <div className="space-y-4">
                        <div>
                          <label className="text-purple-300 text-sm mb-2 block">Select Crypto</label>
                          <select 
                            value={selectedCrypto} 
                            onChange={(e) => setSelectedCrypto(e.target.value)}
                            className="w-full bg-slate-800 text-white rounded-lg p-3 border border-purple-500/30"
                          >
                            {cryptos.map(c => (
                              <option key={c.id} value={c.id}>{c.symbol} - {c.name}</option>
                            ))}
                          </select>
                        </div>
                        
                        <div>
                          <label className="text-purple-300 text-sm mb-2 block">Amount</label>
                          <input 
                            type="number" 
                            value={tradeAmount}
                            onChange={(e) => setTradeAmount(e.target.value)}
                            placeholder="Enter amount"
                            step="0.01"
                            className="w-full bg-slate-800 text-white rounded-lg p-3 border border-purple-500/30"
                          />
                        </div>
                        
                        <div className="bg-slate-800/50 rounded-lg p-3">
                          {(() => {
                            const c = cryptos.find(x => x.id === selectedCrypto);
                            const p = prices[c?.symbol];
                            const amt = parseFloat(tradeAmount) || 0;
                            const cost = amt * (p?.price || 0) * 1.001;
                            return (
                              <>
                                <p className="text-purple-300 text-sm">Price: ${p?.price.toFixed(2) || 'â€”'}</p>
                                {amt > 0 && <p className="text-white font-bold mt-1">Total: ${cost.toFixed(2)}</p>}
                              </>
                            );
                          })()}
                        </div>
                        
                        <div className="flex gap-3">
                          <button 
                            onClick={() => {
                              const amt = parseFloat(tradeAmount);
                              if (amt) buy(selectedCrypto, amt);
                            }}
                            className="flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg"
                          >
                            BUY
                          </button>
                          <button 
                            onClick={() => {
                              const amt = parseFloat(tradeAmount);
                              if (amt) sell(selectedCrypto, amt);
                            }}
                            className="flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-lg"
                          >
                            SELL
                          </button>
                        </div>
                      </div>
                      
                      <div className="mt-4 grid grid-cols-3 gap-2">
                        <button onClick={() => setTradeAmount('0.1')} className="bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded text-sm">0.1</button>
                        <button onClick={() => setTradeAmount('1')} className="bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded text-sm">1.0</button>
                        <button onClick={() => setTradeAmount('5')} className="bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded text-sm">5.0</button>
                      </div>
                    </div>

                    <div className="bg-white/10 rounded-xl p-6">
                      <h2 className="text-xl font-bold text-white mb-4">Price Chart</h2>
                      <div className="space-y-3">
                      {cryptos.map(c => {
                        const p = prices[c.symbol];
                        if (!p) return null;
                        return (
                          <div key={c.id} className="bg-slate-800/50 rounded-lg p-4 flex justify-between items-center">
                            <div>
                              <h3 className="text-lg font-bold text-white">{c.symbol}</h3>
                              <p className="text-purple-300 text-sm">${p.price.toFixed(2)}</p>
                              <p className={`text-xs ${p.change >= 0 ? 'text-green-400' : 'text-red-400'}`}>
                                {p.change >= 0 ? '+' : ''}{p.change.toFixed(2)}%
                              </p>
                            </div>
                            <button
                              onClick={() => {
                                setSelectedCrypto(c.id);
                                setTradeAmount('0.1');
                              }}
                              className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-bold"
                            >
                              Select
                            </button>
                          </div>
                        );
                      })}
                    </div>
                  </div>

                  <div className="bg-white/10 rounded-xl p-6">
                    <h2 className="text-xl font-bold text-white mb-4">Your Holdings</h2>
                    {portfolio.length === 0 ? (
                      <p className="text-purple-300">No holdings yet. Start trading!</p>
                    ) : (
                      <div className="space-y-3">
                        {portfolio.map(h => {
                          const p = prices[h.symbol];
                          if (!p) return null;
                          const value = h.amount * p.price;
                          const pl = value - (h.amount * h.buyPrice);
                          const plPercent = (pl / (h.amount * h.buyPrice)) * 100;
                          
                          return (
                            <div key={h.id} className="bg-slate-800/50 rounded-lg p-4">
                              <div className="flex justify-between items-start mb-2">
                                <div>
                                  <h3 className="text-lg font-bold text-white">{h.symbol}</h3>
                                  <p className="text-purple-300 text-sm">{h.amount.toFixed(4)} coins</p>
                                  <p className={`text-sm ${pl >= 0 ? 'text-green-400' : 'text-red-400'}`}>
                                    {pl >= 0 ? '+' : ''}${pl.toFixed(2)} ({plPercent.toFixed(1)}%)
                                  </p>
                                </div>
                                <div className="text-right">
                                  <p className="text-xl font-bold text-white">${value.toFixed(2)}</p>
                                </div>
                              </div>
                              <button
                                onClick={() => sell(h.id, h.amount)}
                                className="w-full bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-lg font-bold mt-2"
                              >
                                Sell All
                              </button>
                              <button
                                onClick={() => {
                                  setSelectedCrypto(h.id);
                                  setTradeAmount((h.amount / 2).toFixed(4));
                                }}
                                className="w-full bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg font-bold mt-2"
                              >
                                Sell Half
                              </button>
                            </div>
                          );
                        })}
                      </div>
                    )}
                  </div>
                </div>

                  <div className="bg-white/10 rounded-xl p-6">
                    <h2 className="text-xl font-bold text-white mb-4">ðŸ¤– AI Recommendations</h2>
                    
                    {economicData && (
                      <div className="bg-slate-800/50 rounded-lg p-3 mb-4">
                        <p className="text-xs text-purple-300 mb-1">Market Sentiment</p>
                        <p className={`font-bold text-lg ${
                          sentiment === 'bullish' ? 'text-green-400' :
                          sentiment === 'bearish' ? 'text-red-400' : 
                          sentiment === 'optimistic' ? 'text-blue-400' : 
                          sentiment === 'cautious' ? 'text-yellow-400' : 'text-gray-400'
                        }`}>
                          {sentiment.toUpperCase()}
                        </p>
                        <div className="grid grid-cols-2 gap-2 mt-2 text-xs text-purple-300">
                          <div>ðŸ’° Inflation: {economicData.inflation}%</div>
                          <div>ðŸ“Š Fed Rate: {economicData.fedRate}%</div>
                          <div>ðŸ“ˆ GDP: {economicData.gdpGrowth}%</div>
                          <div>ðŸ‘¥ Unemp: {economicData.unemployment}%</div>
                        </div>
                      </div>
                    )}
                    
                    {/* Advanced Indicators */}
                    <div className="bg-slate-800/50 rounded-lg p-3 mb-4">
                      <p className="text-xs text-purple-300 mb-2 font-bold">Advanced Indicators</p>
                      <div className="space-y-1 text-xs">
                        {fearGreedIndex && (
                          <div className="flex justify-between">
                            <span className="text-purple-400">ðŸ˜± Fear & Greed:</span>
                            <span className={`font-bold ${
                              fearGreedIndex.value < 25 ? 'text-red-400' :
                              fearGreedIndex.value > 75 ? 'text-green-400' : 'text-yellow-400'
                            }`}>
                              {fearGreedIndex.value} ({fearGreedIndex.label})
                            </span>
                          </div>
                        )}
                        {vixIndex && (
                          <div className="flex justify-between">
                            <span className="text-purple-400">ðŸ“‰ VIX (Fear):</span>
                            <span className={`font-bold ${
                              vixIndex > 30 ? 'text-red-400' :
                              vixIndex < 15 ? 'text-green-400' : 'text-yellow-400'
                            }`}>
                              {vixIndex.toFixed(1)}
                            </span>
                          </div>
                        )}
                        {dollarIndex && (
                          <div className="flex justify-between">
                            <span className="text-purple-400">ðŸ’µ Dollar Index:</span>
                            <span className={`font-bold ${
                              dollarIndex > 110 ? 'text-red-400' :
                              dollarIndex < 100 ? 'text-green-400' : 'text-yellow-400'
                            }`}>
                              {dollarIndex.toFixed(1)}
                            </span>
                          </div>
                        )}
                      </div>
                      <p className="text-xs text-purple-400 mt-2">
                        ðŸŸ¢ Green = Bullish for crypto | ðŸ”´ Red = Bearish
                      </p>
                    </div>
                    
                    {/* Email Alerts Setup */}
                    <div className="bg-slate-800/50 rounded-lg p-3 mb-4">
                      <p className="text-xs text-purple-300 mb-2">ðŸ“§ Email Alerts (High Confidence Only)</p>
                      <input 
                        type="email" 
                        value={userEmail}
                        onChange={(e) => setUserEmail(e.target.value)}
                        placeholder="your@email.com"
                        className="w-full bg-slate-900 text-white rounded px-2 py-1 text-xs mb-2 border border-purple-500/30"
                      />
                      <label className="flex items-center gap-2 text-xs text-white cursor-pointer">
                        <input 
                          type="checkbox" 
                          checked={emailAlerts}
                          onChange={(e) => setEmailAlerts(e.target.checked)}
                          className="rounded"
                        />
                        Enable alerts (simulated)
                      </label>
                      <p className="text-xs text-purple-400 mt-1">
                        * Alerts shown in console (demo mode)
                      </p>
                    </div>
                    
                    {aiSuggestions.length === 0 ? (
                      <p className="text-purple-300 text-sm">Analyzing markets...</p>
                    ) : (
                      <div className="space-y-3">
                        {aiSuggestions.map((s, i) => (
                          <div key={i} className="bg-slate-800/50 rounded-lg p-3 border-l-4 border-purple-500">
                            <div className="flex justify-between items-start mb-2">
                              <div>
                                <h3 className="font-bold text-white">{s.symbol}</h3>
                                <p className="text-xs text-purple-300">${s.price.toFixed(2)}</p>
                              </div>
                              <span className={`px-2 py-1 rounded text-xs font-bold ${
                                s.action === 'BUY' ? 'bg-green-600' : 'bg-red-600'
                              } text-white`}>
                                {s.action}
                              </span>
                            </div>
                            <p className="text-xs text-purple-300 mb-2">{s.reason}</p>
                            <div className="flex justify-between items-center mb-2">
                              <span className={`text-xs px-2 py-1 rounded ${
                                s.confidence === 'High' ? 'bg-green-600/30 text-green-300' : 'bg-yellow-600/30 text-yellow-300'
                              }`}>
                                {s.confidence}
                              </span>
                            </div>
                            <button
                              onClick={() => {
                                if (s.action === 'BUY') {
                                  buy(s.id, s.amount);
                                } else {
                                  sell(s.id, s.amount);
                                }
                              }}
                              className={`w-full font-bold py-2 rounded-lg ${
                                s.action === 'BUY' 
                                  ? 'bg-green-600 hover:bg-green-700' 
                                  : 'bg-red-600 hover:bg-red-700'
                              } text-white`}
                            >
                              Execute {s.action} {s.amount.toFixed(4)} {s.symbol}
                            </button>
                          </div>
                        ))}
                      </div>
                    )}
                    
                    <div className="mt-4 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg">
                      <p className="text-xs text-blue-300">
                        ðŸ’¡ <strong>7 Data Sources:</strong> RSI, MA, Volatility, Momentum, Inflation, GDP, Fed Rate, Unemployment, Fear&Greed, VIX, Dollar Index
                      </p>
                    </div>
                    
                    <div className="mt-3 p-3 bg-green-500/10 border border-green-500/30 rounded-lg">
                      <p className="text-xs text-green-300">
                        ðŸ“§ High confidence signals auto-alert if email enabled
                      </p>
                    </div>
                  </div>
                </div>

                <div className="mt-6 text-center">
                  <p className="text-purple-300 text-sm">ðŸ’¾ Auto-saves â€¢ Paper trading with real prices</p>
                </div>
              </div>
            </div>
          );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>